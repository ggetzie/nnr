var stripe,checkoutSessionId,setupElements=function(){fetch("/main/public_key/",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}).then((function(e){return e.json()})).then((function(e){stripe=Stripe(e.publicKey)}))},createCheckoutSession=function(e){if(!e)return ad=createAlert("Please select a plan to continue.",["alert-danger"]),void document.getElementById("payment_plan_form").before(ad);fetch(`/main/create-checkout-session/?plan=${e}`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}).then((function(e){return e.json()})).then((function(e){checkoutSessionId=e.checkoutSessionId}))};setupElements(),document.querySelectorAll("[type='radio'][name='plan']").forEach((e=>{e.addEventListener("change",(function(e){this.checked&&(document.getElementById("enterPaymentInfo").disabled=!1,createCheckoutSession(this.value))}))})),document.getElementById("enterPaymentInfo").addEventListener("click",(function(e){e.preventDefault(),stripe.redirectToCheckout({sessionId:checkoutSessionId}).then((function(e){console.log("error redirecting to stripe checkout")})).catch((function(e){console.log(e)}))}));