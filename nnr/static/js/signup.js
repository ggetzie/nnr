"use strict";var stripe,checkoutSessionId,setupElements=function(){fetch("/main/public_key/",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}}).then(function(e){return e.json()}).then(function(e){stripe=Stripe(e.publicKey)})};function createCheckoutSession(){for(var e=document.getElementById("signup_form"),t={},n=0;n<e.length;n++)"submit"!==e[n].type&&(t[e[n].name]=e[n].value);fetch("/main/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":t.csrfmiddlewaretoken,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){stripe.redirectToCheckout({sessionId:e.checkoutSessionId}).then(function(e){console.log("error redirecting to stripe"),console.log(e)}).catch(function(e){console.log(e)})})}setupElements(),document.getElementById("signup_form").addEventListener("submit",function(e){e.preventDefault(),console.log("form submission"),createCheckoutSession()});